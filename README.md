<h2 style="text-align: center;">Bài tiểu luận giữa kỳ</h2>

<h1 style="text-align: center;">HỆ THỐNG QUẢN LÝ CỬA HÀNG THỂ THAO
</h1>


_Người hướng dẫn_: **ĐẶNG HUỲNH TRUNG TÍN**

_Người thực hiện_: **BÙI VĂN TUẤN - 51603361**

**TRẦN HOÀNG PHÚC - 51603242**

**CAO THÀNH PHÁT – 51603230**

**NGUYỄN THỊ CẨM NHUNG - 51900164**

Khóa : *2016 & 2019*

<p style="text-align: center;">TP Hồ Chí Minh 2022</>



**LỜI CẢM ƠN**

Trên thực tế không có sự thành công nào mà không gắn liền với những sự hỗ trợ, giúp đỡ dù ít hay nhiều, dù trực tiếp hay gián tiếp của người khác. Trong suốt thời gian từ khi bắt đầu học tập ở giảng đường đại học đến nay, chúng tôi đã nhận được rất nhiều sự quan tâm, giúp đỡ của quý Thầy Cô, gia đình và bạn bè.

Với lòng biết ơn sâu sắc nhất, chúng em xin gửi đến quý Thầy Cô ở Khoa Công Nghệ Thông Tin – Trường Đại Học Tôn Đức Thắng đã cùng với tri thức và tâm huyết của mình để truyền đạt vốn kiến thức quý báu cho chúng tôi trong suốt thời gian học tập tại trường. Và đặc biệt, trong học kỳ này, Khoa đã tổ chức cho chúng tôi được tiếp cận với môn học mà theo chúng em là rất hữu ích đối với sinh viên khoa công nghệ thông tin. Đó là môn &quot;Mẫu Thiết Kế&quot;.

Chúng tôi xin chân thành cảm ơn thầy Đặng Huỳnh Trung Tín đã tận tâm hướng dẫn chúng tôi qua từng buổi học trên lớp thực hành về môn Mẫu Thiết Kế. Nếu không có những lời hướng dẫn, dạy bảo của anh thì chúng em nghĩ bài tiểu luận này của chúng tôi rất khó có thể hoàn thiện được. Một lần nữa, chúng tôi xin chân thành cảm ơn anh. Bước đầu đi vào thực tế, tìm hiểu về môn Mẫu Thiết Kế, kiến thức của chúng tôi còn hạn chế và còn nhiều bỡ ngỡ. Do vậy, không tránh khỏi những thiếu sót là điều chắc chắn, chúng tôi rất mong nhận được những ý kiến đóng góp quý báu của thầy và các bạn cùng lớp để kiến thức của chúng tôi trong lĩnh vực này được hoàn thiện hơn.

Sau cùng, chúng tôi xin kính chúc quý Thầy Cô trong Khoa Công Nghệ Thông Tin thật dồi dào sức khỏe, niềm tin để tiếp tục thực hiện sứ mệnh cao đẹp của mình là truyền đạt kiến thức cho thế hệ mai sau.

**ĐỒ ÁN ĐƯỢC HOÀN THÀNH TẠI TRƯỜNG ĐẠI HỌC TÔN ĐỨC THẮNG**

Chúng tôi xin cam đoan đây là sản phẩm đồ án của riêng chúng tôi và được sự hướng dẫn của anh Đặng Huỳnh Trung Tín. Các nội dung nghiên cứu, kết quả trong đề tài này là trung thực và chưa công bố dưới bất kỳ hình thức nào trước đây. Những số liệu trong các bảng biểu phục vụ cho việc phân tích, nhận xét, đánh giá được chính tác giả thu thập từ các nguồn khác nhau có ghi rõ trong phần tài liệu tham khảo.

Ngoài ra, trong đồ án còn sử dụng một số nhận xét, đánh giá cũng như số liệu của các tác giả khác, cơ quan tổ chức khác đều có trích dẫn và chú thích nguồn gốc.

**Nếu phát hiện có bất kỳ sự gian lận nào chúng tôi xin hoàn toàn chịu trách nhiệm về nội dung đồ án của mình.** Trường đại học Tôn Đức Thắng không liên quan đến những vi phạm tác quyền, bản quyền do chúng tôi gây ra trong quá trình thực hiện (nếu có).

_TP. Hồ Chí Minh, ngày tháng năm 2022_

_Tác giả_

_Bùi Văn Tuấn_

_Trần Hoàng Phúc_

_Cao Thành Phát_

_Nguyễn Thị Cẩm Nhung_

# TÓM TẮT

Ngày nay, công nghệ thông tin đã và đang đóng vai trò quan trọng trong xã hội. Nó giúp con người làm việc với mức độ chính xác cao, quản lý và tổ chức công việc đạt hiệu quả cùng với đó thông tin cũng được phổ biến và cập nhật nhanh chóng. Do đó việc ứng dụng công nghệ vào các phòng ban công ty, xí nghiệp, trường học là nhu cầu tất yếu.

**MỤC LỤC**

[LỜI CẢM ƠN](#_Toc104588907)

[PHẦN XÁC NHẬN VÀ ĐÁNH GIÁ CỦA GIẢNG VIÊN](#_Toc104588908)

[TÓM TẮT](#_Toc104588909)

[MỤC LỤC](#_Toc104588910)

[CHƯƠNG 1: GIỚI THIỆU](#_Toc104588911)

[CHƯƠNG 2: YÊU CẦU](#_Toc104588912)

[CHƯƠNG 3: CÁCH THỰC THI ỨNG DỤNG](#_Toc104588914)

[CHƯƠNG 4: Giới thiệu, đặt vấn đề &amp; lí do chọn pattern](#_Toc104588917)

[a. Singleton](#_Toc104588918)

[b. Factory](#_Toc104588919)

[c. Builder](#_Toc104588920)

[d. Adapter](#_Toc104588921)

# CHƯƠNG 1: GIỚI THIỆU

Thương mại điện tử (E-Commerce) là hình thức kinh doanh trực tuyến sử dụng nền tảng công nghệ thông tin với sự hỗ trợ của Internet để thực hiện các giao dịch mua bán, trao đổi, thanh toán trực tuyến.

Thương mại điện tử (TMĐT) là xu hướng của thời đại toàn cầu hóa, đây là lĩnh vực tiềm năng để các doanh nghiệp vừa và nhỏ sinh lợi và phát triển, cơ hội cho những ai muốn khởi nghiệp kinh doanh theo mô hình mới, Mô hình kinh doanh Thương mại điện tử được xem như một trong những giải pháp thúc đẩy sự phát triển của nền kinh tế quốc gia.

Ứng dụng ecommerce-management là api để hỗ trợ quản lý catalog, product, user và billing cho các app thương mại điện tử hiện hành.
# CHƯƠNG 2: YÊU CẦU

* Java 8
* postgreSQL
* Apache Tomcat
* Git
* Apache maven

# CHƯƠNG 3: CÁCH THỰC THI ỨNG DỤNG

#### Lấy code từ git

`git clone https://github.com/TDTU-IT-DP/ecommerce-management`

`git checkout develop`

#### tạo database name: app_dev
insert follow:

INSERT INTO roles(name) VALUES('ROLE_USER');

INSERT INTO roles(name) VALUES('ROLE_MODERATOR');

INSERT INTO roles(name) VALUES('ROLE_ADMIN');

#### cách chạy
trong thư mục ecommerce-management run lệnh
`mvn clean install` để tải thư viện về
và
`mvn spring-boot:run` để chạy ứng dụng


# CHƯƠNG 4: GIỚI THIỆU, ĐẶT VẤN ĐỀ VÀ LÝ DO CHỌN PATTERN

### a. Singleton

>'' Singleton is a creational design pattern that lets you ensure that a class has only one instance, while providing a global access point to this instance.''
>
Singleton pattern là một pattern khởi tạo mà:
- Đảm bảo rằng một class chỉ có duy nhất một instance (khởi tạo).
- Giúp quản lý việc truy cập tốt hơn vì chỉ có 1 thể hiện (instance) duy nhất.
- Quản lý được số lượng thể hiện (instance) của một lớp (class) trong một giới hạn chỉ định.

Chúng ta có rất nhiều cách để implement Singleton pattern. Nhưng dù cho việc implement bằng cách nào đi nữa cũng cần dựa vào những nguyên tắc dưới cơ bản dưới đây:

- Dữ liệu instance (private và static) là đối tượng duy nhất của lớp Singleton.
- Private hoặc protected constructor nhằm hạn chế người dùng tạo instance trực tiếp từ lớp (class) bên ngoài.
- Đặt private static final variable để đảm bảo biến chỉ được khởi tạo trong class.
- Có một method public static để return instance đã được khởi tạo ở trên.

**Vấn đề bài toán** :

Trong quá trình phân tích thiết kế một hệ thống, chúng ta mong muốn có những đối tượng cần tồn tại duy nhất và có thể truy xuất mọi lúc mọi nơi. Vậy làm thế nào để hiện thực được một đối tượng như thế khi xây dựng mã nguồn? Chúng ta có thể nghĩ tới việc sử dụng một biến toàn cục global variable: public static final. Tuy nhiên, việc sử dụng biến toàn cục nó phá vỡ quy tắc đóng gói của Lập trình hướng đối tượng. Để giải bài toán trên, người ta hướng đến một giải pháp là sử dụng **Singleton pattern**.

**Lí do chọn pattern:**

Singleton Pattern được ứng dụng trong trường hợp giải quyết các bài toán cần truy cập vào các ứng dụng (truy cập giao diện phần cứng, tệp cấu hình, Shared resource, Logger, Configuration, Caching, Thread pool, ...)

Cụ thể:

- **Truy cập giao diện phần cứng:** Singleton có thể được sử dụng trong trường hợp yêu cầu giới hạn sử dụng tài nguyên phần cứng bên ngoài. Chẳng hạn như: máy in (in hóa đơn, …) phần cứng nơi mà bộ đệm in có thể được tạo thành một Singleton nhằm tránh nhiều truy cập đồng thời và tạo ra tắc nghẽn.
- **Logger** : Các class Singleton được ứng dụng trong các tệp nhật ký. Các tệp nhật ký được tạo bởi đối tượng class trình ghi nhật ký. Ví dụ, một ứng dụng trong đó tiện ích ghi nhật ký phải tạo một tệp nhật ký dựa trên các thông báo nhận được từ người dùng. Nếu có nhiều ứng dụng khách sử dụng lớp tiện ích ghi nhật ký này, chúng có thể sẽ tạo nhiều bản sao của lớp này và có thể gây ra lỗi trong quá trình truy cập cùng lúc vào cùng một file trình ghi nhật ký. Chúng ta có thể dùng lớp tiện ích ghi nhật ký như một lớp đơn và cung cấp một điểm tham chiếu chung để mỗi người dùng có thể sử dụng tiện ích này và không có 2 người dùng nào truy cập nó cùng một lúc.
- **Tệp cấu hình** : Singleton pattern rất phù hợp để ứng dụng vào tệp cấu hình vì nó ngăn cản nhiều người dùng truy cập liên tục và đọc tệp cấu hình hoặc tệp thuộc tính.

**Ấp dụng:**
Sử dụng singleton để tạo lớp logger, lớp này được khởi tạo 1 lần trong suốt vòng đời của chương trình

```
public class Logger {
    private static Logger logger = null;
    private final String logFile = "log/log.txt";

    private PrintWriter writer;

    private Logger() {
        try {
            FileWriter fw = new FileWriter(logFile);
            writer = new PrintWriter(fw, true);
        } catch (IOException ignored) {}
    }

    public static synchronized Logger getInstance(){
        if(logger == null)
            logger = new Logger();
        return logger;
    }

    public void info (String clazz, String message) {
        writer.println(String.format("%s INFO: %s --- %s", new Date(), clazz, message));
    }

    public void error (String error, String message) {
        final String format = String.format("%s ERROR: %s --- %s", new Date(), error, message);
        writer.println(format);
    }

}

```


### b. Factory

>''Factory Method is a creational design pattern that provides an interface for creating objects in a superclass, but allows subclasses to alter the type of objects that will be created''

Factory Pattern thuộc nhóm Creational Design Pattern (mẫu khởi tạo). Vì nhiệm vụ của mẫu này là quản lý và trả về các đối tượng theo yêu cầu, cung cấp một trong những cách tốt nhất để tạo một đối tượng. Giúp cho việc khởi tạo đổi tượng một cách linh hoạt hơn. Trong Factory Pattern, chúng ta tạo đối tượng mà không để lộ logic tạo đối tượng ở phía người dùng và tham chiếu đến đối tượng mới được tạo ra bằng cách sử dụng một interface chung.

Factory method&quot; thường được sử dụng trong việc thiết kế toolkit hay framework, đoạn mã của framework cần thiết phải tạo ra một đối tượng là những lớp con tương ứng tăng tính mềm dẻo trong sử dụng framework đó.

**Vấn đề bài toán:**

Để giải quyết vấn đề tạo một đối tượng mà không cần thiết chỉ ra một cách chính xác lớp nào sẽ được tạo. Factory method giải quyết vấn đề này bằng cách định nghĩa một phương thức cho việc tạo đối tượng, và các lớp con thừa kế có thể override để chỉ rõ đối tượng nào sẽ được tạo. Nói chung, &quot;factory method&quot; thường được áp dụng cho những phương thức mà nhiệm vụ chính của nó là tạo ra đối tượng.

**Lí do chọn pattern:**

- Giúp việc khởi tạo các Objects mà che giấu đi xử lí logic của việc khởi tạo đó. Người dùng không biết logic thực sự được khởi tạo bên dưới phương thức factory.
- Mẫu thiết kế này cho phép các lớp con chọn kiểu đối tượng cần tạo.
- Nó thúc đẩy sự liên kết lỏng lẻo bằng cách loại bỏ sự cần thiết phải ràng buộc các lớp cụ thể vào code. Nghĩa là code chỉ tương tác với interface hoặc lớp abstract, để nó sẽ làm việc với bất kỳ lớp nào implements interface đó hoặc extends lớp abstract.
- Factory Pattern giúp giảm sự phụ thuộc giữa các module: cung cấp 1 hướng tiếp cận với Interface thay vì các implement. Giúp chuơng trình độc lập với những lớp cụ thể mà chúng ta cần tạo 1 đối tượng, code ở phía client sẽ không bị ảnh hưởng khi thay đổi logic ở factory hay sub class.
- Việc mở rộng code dễ dàng hơn: khi cần mở rộng, chỉ việc tạo ra những sub class và implement thêm vào factory method.
- Dễ dạng quản lý life cycle của các Object được tạo bởi Factory Method Pattern.
- Thống nhất về mặt naming convention: giúp cho các developer có thể hiểu về cấu trúc source code.

**Áp dụng**


### c. Builder
>''Builder is a creational design pattern that separate the construction of a complex object from its representation so that the same construction process can create different representations.''
>
**Builder pattern**  là một trong những  **Creational pattern**. Builder pattern là mẫu thiết kế đối tượng được tạo ra để xây dựng một đôi tượng phức tạp bằng cách sử dụng các đối tượng đơn giản và sử dụng tiếp cận từng bước, việc xây dựng các đối tượng đôc lập với các đối tượng khác.

Builder Pattern được xây dựng để khắc phục một số nhược điểm của Factory Pattern và Abstract Factory Pattern khi mà Object có nhiều thuộc tính.

**Vấn đề bài toán:**

Lập trình viên muốn thay đổi thiết kế cho việc lồng nhau của các hàm khởi tạo (Telescoping Constructor Pattern). Vấn đề này phát sinh khi lập trình viên làm việc với một lớp mà có chứa rất nhiều các thuộc tính và cần phải tạo ra nhiều hàm khởi tạo với số lượng các thuộc tính tăng dần.

Lập trình viên cần tạo ra một đối tượng phức tạp, một đối tượng mà thuật toán để tạo tạo lập các thuộc tính là độc lập đối với các thuộc tính khác.

**Lí do chọn pattern:**

- Hỗ trợ, loại bớt việc phải viết nhiều constructor.
- Code dễ đọc, dễ bảo trì hơn khi số lượng thuộc tính (propery) bắt buộc để tạo một object từ 4 hoặc 5 propery.
- Giảm bớt số lượng constructor, không cần truyền giá trị null cho các tham số không sử dụng.
- Ít bị lỗi do việc gán sai tham số khi mà có nhiều tham số trong constructor: bởi vì người dùng đã biết được chính xác giá trị gì khi gọi phương thức tương ứng.
- Đối tượng được xây dựng an toàn hơn: bởi vì nó đã được tạo hoàn chỉnh trước khi sử dụng.
- Cung cấp cho bạn kiểm soát tốt hơn quá trình xây dựng: chúng ta có thể thêm xử lý kiểm tra ràng buộc trước khi đối tượng được trả về người dùng.
- Có thể tạo đối tượng immutable.
-
**Áp dụng:**

Sử dụng builder để tạo mới 1 instance User


```    
public static class UserBuilder{
        private Long id;

        private String username;

        private String email;

        private String password;

        private Collection<? extends GrantedAuthority> authorities;

        public UserBuilder(String username, String password, Collection<? extends GrantedAuthority> authorities){
            this.username = username;
            this.password = password;
            this.authorities = authorities;
        }

        public UserBuilder id(Long id){
            this.id = id;
            return this;
        }

        public UserBuilder email(String email){
            this.email = email;
            return this;
        }

        public UserDetailsImpl build(){
            return new UserDetailsImpl(this);
        }

    }
```

### d. Adapter

>''Adapter is a structural design pattern that allows objects with incompatible interfaces to collaborate.''


Adapter Pattern (Người chuyển đổi) là một trong những Pattern thuộc nhóm cấu trúc (Structural Pattern). Adapter Pattern cho phép các inteface (giao diện) không liên quan tới nhau có thể làm việc cùng nhau. Đối tượng giúp kết nối các interface gọi là Adapter.

Adapter Pattern giữ vai trò trung gian giữa hai lớp, chuyển đổi interface của một hay nhiều lớp có sẵn thành một interface khác, thích hợp cho lớp đang viết. Điều này cho phép các lớp có các interface khác nhau có thể dễ dàng giao tiếp tốt với nhau thông qua interface trung gian, không cần thay đổi code của lớp có sẵn cũng như lớp đang viết.

**Vấn đề bài toán:**

- Adapter Pattern giúp nhiều lớp có thể làm việc với nhau dễ dàng mà bình thường không thể. Một trường hợp thường gặp phải và có thể áp dụng Adapter Pattern là khi không thể kế thừa lớp A, nhưng muốn một lớp B có những xử lý tương tự như lớp A. Khi đó chúng ta có thể cài đặt B theo Object Adapter, các xử lý của B sẽ gọi những xử lý của A khi cần.
- Khi muốn sử dụng một lớp đã tồn tại trước đó nhưng interface sử dụng không phù hợp như mong muốn.
- Khi muốn tạo ra những lớp có khả năng sử dụng lại, chúng phối hợp với các lớp không liên quan hay những lớp không thể đoán trước được và những lớp này không có những interface tương thích.
- Cần phải có sự chuyển đổi interface từ nhiều nguồn khác nhau.
- Khi cần đảm bảo nguyên tắc Open/ Close trong một ứng dụng.

**Lí do chọn pattern:**

- Cho phép nhiều đối tượng có interface giao tiếp khác nhau có thể tương tác và giao tiếp với nhau.

- Tăng khả năng sử dụng lại thư viện với interface không thay đổi do không có mã nguồn.